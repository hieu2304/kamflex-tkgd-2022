<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./detail.css" />
    <title>Thông tin chi tiết phim</title>
  </head>
  <body>
    <header></header>
    <div class="p-trailer-modal c-modal u-flex u-center u-a-center">
      <div class="c-modal__content">
        <button class="c-btn-icon c-modal__close">
          <i class="bx bx-x" style></i>
        </button>
        <div class="l-container">
          <iframe
            style="width: 1200px; max-width: 100%; height: 80vh"
            src="https://www.youtube.com/embed/uAQFxn2Ss84"
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </div>
    </div>
    <main class="l-container">
      <section class="c-section p-informations">
        <h3 class="c-section__title c-title">Thông tin phim</h3>
        <div class="c-section__content">
          <div class="row u-flex-start">
            <div class="col-2 col-sm-6">
              <div class="img-ratio2x3 p-informations__poster">
                <img src="" alt="movie image" id="movie-poster" />
              </div>
            </div>
            <div class="col-10 col-sm-12">
              <div class="row">
                <div class="col-8 col-sm-12">
                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Tên phim: </span>
                      <p class="c-paragraphy u-flex-1" id="movie-title"></p>
                    </div>
                  </div>

                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Thời lượng: </span>
                      <p class="c-paragraphy u-flex-1" id="movie-runtime"></p>
                    </div>
                  </div>
                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Thể loại: </span>
                      <p class="c-paragraphy u-flex-1" id="movie-genres"></p>
                    </div>
                  </div>
                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Trạng thái: </span>
                      <p class="c-paragraphy u-flex-1" id="movie-status"></p>
                    </div>
                  </div>
                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Năm sản xuất: </span>
                      <p
                        class="c-paragraphy u-flex-1"
                        id="movie-releasedAt"
                      ></p>
                    </div>
                  </div>

                  <div class="p-informations__item">
                    <div class="u-flex">
                      <span class="c-label"> Ngôn ngữ: </span>
                      <p class="c-paragraphy u-flex-1" id="movie-languages"></p>
                    </div>
                  </div>
                </div>
                <div class="col-4 col-sm-12">
                  <div class="p-informations__total">
                    <span class="c-label p-informations__total__label"
                      >Đánh giá từ người xem</span
                    >
                    <div class="p-informations__total__box">
                      <div
                        class="
                          p-informations__total__scores
                          u-flex u-a-center u-center
                        "
                      >
                        <img src="./assets/icons/full-star.png" alt="" />
                        <p id="movie-total-score"></p>
                      </div>
                      <span
                        class="p-informations__total__reviews"
                        id="movie-total-review"
                      >
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="c-section p-mod">
        <h3 class="c-section__title c-title">Đánh giá từ kamflex</h3>
        <div class="c-section__content">
          <div class="row">
            <div class="col-5 col-sm-12 p-mod__scores">
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Diễn xuất: </span>
                <img src="" alt="" style="height: 25px" id="mod-acting" />
              </div>
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Nội dung: </span>
                <img src="" alt="" style="height: 25px" id="mod-content" />
              </div>
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Hình ảnh: </span>
                <img src="" alt="" style="height: 25px" id="mod-frame" />
              </div>
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Âm thanh: </span>
                <img src="" alt="" style="height: 25px" id="mod-sound" />
              </div>
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Kỹ xảo: </span>
                <img src="" alt="" style="height: 25px" id="mod-effects" />
              </div>
              <div class="u-flex u-a-center p-mod__scores__item">
                <span class="c-label"> Tổng kết: </span>
                <img src="" alt="" style="height: 25px" id="mod-total" />
              </div>
            </div>
            <div class="col-7 col-sm-12">
              <p class="c-paragraphy c-line-height-2" id="mod-review"></p>
            </div>
          </div>
        </div>
      </section>

      <section class="c-section">
        <h3 class="c-section__title c-title">Nội dung phim</h3>
        <div class="c-section__content">
          <p class="c-paragraphy c-line-height-2" id="movie-content"></p>
        </div>
      </section>

      <section class="c-section p-actors">
        <h3 class="c-section__title c-title">Diễn viên và đoàn làm phim</h3>
        <div class="slider-control">
          <div
            class="
              slider-control__previous
              actors__previous
              u-flex u-center u-a-center
            "
          >
            <i class="bx bx-chevron-left"></i>
          </div>
          <div
            class="slider-control__next actors__next u-flex u-center u-a-center"
          >
            <i class="bx bx-chevron-right"></i>
          </div>
        </div>
        <div class="c-section__content">
          <div id="actors"></div>
        </div>
      </section>

      <section class="c-section p-videos">
        <h3 class="c-section__title c-title">Video</h3>
        <div class="slider-control">
          <div
            class="
              slider-control__previous
              videos__previous
              u-flex u-a-center u-center
            "
          >
            <i class="bx bx-chevron-left"></i>
          </div>
          <div
            class="slider-control__next videos__next u-flex u-a-center u-center"
          >
            <i class="bx bx-chevron-right"></i>
          </div>
        </div>
        <div class="c-section__content">
          <div id="videos"></div>
        </div>
      </section>

      <section class="c-section p-reviews">
        <h3 class="c-section__title c-title">Đánh giá từ người xem</h3>
        <div class="c-section__content">
          <div class="p-reviews__login u-shadow-4">
            <p class="p-reviews__login__text c-paragraphy">
              Bạn chưa đăng nhập <br />
              Hãy đăng nhập để gửi đánh giá nhé
            </p>
            <button class="p-reviews__login__button c-btn c-btn--primary">
              Đăng nhập
            </button>
          </div>
          <div id="reviews"></div>
          <div class="p-reviews__paginate">
            <ul class="c-paginate u-center">
              <li class="c-paginate__prev c-paginate__item">
                <i class="bx bx-chevron-left"></i>
              </li>
              <li class="c-paginate__item selected c-paginate__num">1</li>
              <li class="c-paginate__item c-paginate__num">2</li>
              <li class="c-paginate__item c-paginate__num">3</li>
              <li class="c-paginate__item u-pe-none">...</li>
              <li class="c-paginate__item c-paginate__num">7</li>
              <li class="c-paginate__item c-paginate__num">8</li>
              <li class="c-paginate__next c-paginate__item">
                <i class="bx bx-chevron-right"></i>
              </li>
            </ul>
          </div>
        </div>
      </section>
    </main>
    <footer></footer>
    <script src="./scripts/data.js"></script>
    <script
      type="text/javascript"
      src="//code.jquery.com/jquery-1.11.0.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//code.jquery.com/jquery-migrate-1.2.1.min.js"
    ></script>
    <script src="https://unpkg.com/boxicons@2.1.1/dist/boxicons.js"></script>
    <script
      type="text/javascript"
      src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"
    ></script>
    <script>
      var renderDetails = function (details) {
        $('#movie-poster').attr('src', details.poster);
        $('#movie-title').text(details.title);
        $('#movie-runtime').text(details.runtime + ' phút');
        $('#movie-genres').text(details.genres.join(', '));
        $('#movie-status').text(details.title);
        $('#movie-releasedAt').text(details.releasedAt);
        $('#movie-languages').text(details.languages.join(', '));
        $('#movie-total-score').text(details.totalScore);
        $('#mod-acting').attr(
          'src',
          `/assets/images/scores/${details.mod.acting}.png`
        );
        $('#mod-content').attr(
          'src',
          `/assets/images/scores/${details.mod.content}.png`
        );
        $('#mod-frame').attr(
          'src',
          `/assets/images/scores/${details.mod.frame}.png`
        );
        $('#mod-sound').attr(
          'src',
          `/assets/images/scores/${details.mod.sound}.png`
        );
        $('#mod-effects').attr(
          'src',
          `/assets/images/scores/${details.mod.effects}.png`
        );
        $('#mod-total').attr(
          'src',
          `/assets/images/scores/${details.mod.total}.png`
        );
        $('#movie-total-review').html(
          details.totalReview + `<br />lượt đánh giá`
        );
        $('#mod-review').html(details.mod.review);
        $('#movie-content').html(details.content);
        renderActors(details.actors);
        renderVideos(details.videos);
      };
      var createReviewItem = function (comment) {
        return `<div class="p-reviews__item u-flex u-shadow-4">
              <div class="p-reviews__item__user">
                <img src="./assets/images/default-avatar.jpg" alt="" />
                <div class="pc-only">
                  <p class="p-reviews__item__name u-font--bold c-paragraphy">
                    ${comment.name}
                  </p>
                  <div class="u-flex u-center u-j-evenly">
                    <div>
                      <box-icon name="like"></box-icon>
                      <p> ${comment.totalLike}</p>
                    </div>
                    <div>
                      <box-icon name="dislike" ></box-icon>
                      <p> ${comment.totalDislike}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-reviews__item__content">
                <div class="p-reviews__item__top u-flex u-a-center u-j-between">
                  <div class="sp-only" style="width: 100%">
                    <div
                      class="u-flex u-a-center u-j-between
                        p-reviews__item__top-sp">
                      <p class="p-reviews__item__name u-font--bold c-paragraphy">
                        ${comment.name}
                      </p>
                      <div class="u-flex u-center u-j-evenly">
                        <div class="u-flex u-a-center p-reviews__item__action">
                          <box-icon name="like"></box-icon>
                          <span>${comment.totalLike}</span>
                        </div>
                        <div class="u-flex u-a-center p-reviews__item__action">
                          <box-icon name="dislike" ></box-icon>
                          <span>${comment.totalDislike}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <img
                    src="./assets/images/stars/7.png"
                    alt=""
                    class="p-reviews__item__stars"
                  />
                  <button class="c-btn c-btn--report">
                    Báo cáo bình luận này
                  </button>
                </div>
                <div class="p-reviews__item__text">
                  <p class="c-paragraphy">
                    ${comment.content}
                  </p>
                </div>
                <p class="p-reviews__item__date c-paragraphy--small">
                  ${comment.date}
                </p>
              </div>
            </div>`;
      };
      var renderReviews = function (comments) {
        comments.forEach((comment) => {
          $(createReviewItem(comment)).appendTo('#reviews');
        });
      };
      var renderActorItem = function (actor) {
        return `<div class="p-actors__item">
              <div class="img-ratio2x3 p-actors__item__img">
                <img src="${actor.image}" alt="" />
              </div>
              <p class="c-label p-actors__item__name">${actor.name}</p>
              <p class="c-paragraphy--small p-actors__item__position">${actor.position}</p>
            </div>`;
      };
      var renderActors = function (actors) {
        $actors = $('#actors');
        $actors.empty();
        actors.forEach((actor) => {
          $(renderActorItem(actor)).appendTo($actors);
        });

        $('#actors').slick({
          infinite: true,
          slidesToShow: 6,
          slidesToScroll: 6,
          variableWidth: true,
          prevArrow: $('.actors__previous'),
          nextArrow: $('.actors__next'),
        });
      };
      var renderVideoItem = function (video) {
        return ` <div class="p-videos__item">
              <img src="${video.poster}" alt="" />
              <div class="on-hover">
                <button
                  class="c-btn-icon c-btn-icon--play p-videos__item__icon"
                >
                  <?xml version="1.0" ?><!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>
                  <svg
                    height="40px"
                    width="40px"
                    id="Layer_1"
                    style="enable-background: new 0 0 512 512"
                    version="1.1"
                    viewBox="0 0 512 512"
                    xml:space="preserve"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                  >
                    <path
                      fill="#ffffff"
                      d="M405.2,232.9L126.8,67.2c-3.4-2-6.9-3.2-10.9-3.2c-10.9,0-19.8,9-19.8,20H96v344h0.1c0,11,8.9,20,19.8,20  c4.1,0,7.5-1.4,11.2-3.4l278.1-165.5c6.6-5.5,10.8-13.8,10.8-23.1C416,246.7,411.8,238.5,405.2,232.9z"
                    />
                  </svg>
                </button>
              </div>
            </div>`;
      };
      var renderVideos = function (videos) {
        $videos = $('#videos');
        $videos.empty();
        videos.forEach((video) => {
          $(renderVideoItem(video)).appendTo($videos);
        });
        $('#videos').slick({
          infinite: true,
          slidesToShow: 3,
          slidesToScroll: 3,
          prevArrow: $('.videos__previous'),
          nextArrow: $('.videos__next'),
        });
      };

      function pauseAllVideos() {
        const videos = document.querySelectorAll('iframe');
        videos.forEach((i) => {
          const source = i.src;
          i.src = '';
          i.src = source;
        });
      }
      $(document).on('click', '.p-videos__item', function (e) {
        e.preventDefault();
        $('.p-trailer-modal').addClass('is-open');
      });
      $('.c-modal__close').click(function (e) {
        e.preventDefault();
        pauseAllVideos();
        $('.c-modal').removeClass('is-open');
      });
      $('.c-modal__content').click(function (e) {
        e.stopPropagation();
        pauseAllVideos();
        $('.c-modal').removeClass('is-open');
      });
      $('.c-modal').click(function (e) {
        pauseAllVideos();
        $('.c-modal').removeClass('is-open');
      });

      $(document).on('click', '.c-paginate__num', function (e) {
        e.preventDefault();
        $('.c-paginate__item').removeClass('selected');
        $(this).addClass('selected');
      });
      renderReviews(reviews);
      renderDetails(movieDetails);
    </script>
  </body>
</html>
